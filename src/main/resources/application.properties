# ===== DUKCAPIL SERVICE CONFIGURATION =====

# Application Info
spring.application.name=Dukcapil-KTP-Service
server.port=${PORT:8080}
server.servlet.context-path=/api

# Database Configuration - Dukcapil Database
# --- MENGGUNAKAN KONFIGURASI SPRING CLOUD GCP SQL YANG BENAR ---
# spring.datasource.url hanya perlu nama database jika menggunakan spring-cloud-gcp-starter-sql
spring.datasource.url=jdbc:postgresql:///{DATABASE_NAME}
spring.datasource.username=postgres
spring.datasource.password={SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# Properti khusus untuk Spring Cloud GCP SQL Connector (WAJIB ADA)
spring.cloud.gcp.sql.instance-connection-name={PROJECT_ID}:{REGION}:{INSTANCE_NAME}
spring.cloud.gcp.sql.database-name={DATABASE_NAME}
# Meskipun ada di URL, lebih baik eksplisit di sini juga

# Inisialisasi Database (dari application-postgresql.properties)
spring.sql.init.mode=always


# Connection Pool Settings
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000

# JPA/Hibernate Configuration - IMPORTANT FIX
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=false

# Performance Settings
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# CORS Configuration
app.cors.allowed-origins=*

# Security Settings (untuk production)
app.api.key.enabled=false
app.api.key.value=dukcapil-secret-key-123
app.security.enabled=false

# Service Configuration
app.service.name=Dukcapil KTP Verification Service
app.service.version=1.0.0
app.service.description=Layanan verifikasi data KTP Dukcapil

# Monitoring & Health
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.info.env.enabled=true

# Custom Info for /actuator/info
info.app.name=Dukcapil KTP Service
info.app.description=Service untuk verifikasi data KTP
info.app.version=1.0.0
info.app.encoding=UTF-8
info.app.java.version=24

# Logging Configuration
logging.level.com.dukcapil.service=INFO
logging.level.org.springframework.web=INFO
logging.level.org.springframework.security=INFO

logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Log Pattern
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [DUKCAPIL] %logger{36} - %msg%n

# Validation Messages
app.validation.nik.required=NIK wajib diisi
app.validation.nik.format=NIK harus 16 digit angka
app.validation.name.required=Nama lengkap wajib diisi
app.validation.name.length=Nama lengkap antara 2-100 karakter

# Error Messages
app.error.nik-not-found=NIK tidak terdaftar di database Dukcapil
app.error.name-mismatch=NIK terdaftar namun nama tidak sesuai
app.error.system-error=Terjadi kesalahan sistem
app.error.invalid-format=Format data tidak valid

# Performance Tuning
server.tomcat.max-threads=200
server.tomcat.min-spare-threads=10
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain,application/javascript,text/css

# Response Configuration
spring.jackson.serialization.indent-output=true
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Jakarta

# Development Profile
# spring.profiles.active=development
